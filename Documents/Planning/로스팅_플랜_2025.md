# ☕ 더문드립바 로스팅 플랜 2025

> **프로젝트명**: 원두 생두 로스팅 최적화 플랜
> **작성일**: 2025-10-29
> **대상**: 더문드립바 로스팅 운영

---

## 1. Constitution (원칙)

### 1.1 프로젝트 목표

더문드립바의 로스팅 운영 데이터를 분석하여 **원가 최적화**와 **품질 안정화**를 동시에 달성하는 로스팅 시스템 구축

### 1.2 핵심 원칙

| 원칙 | 설명 |
|------|------|
| **데이터 기반** | 로스팅 일지의 실제 데이터를 기반으로 의사결정 |
| **품질 우선** | 손실 최소화보다 일관된 품질 유지를 우선 |
| **효율성** | 17% 손실률 최적화를 통한 원가 절감 |
| **투명성** | 모든 로스팅 데이터 및 원가 계산 가시화 |
| **지속성** | 장기적인 로스팅 플랜 수립 및 개선 |

### 1.3 성공 기준

- ✅ 로스팅 손실률 모니터링 시스템 구축
- ✅ 블렌딩 레시피별 원가 자동 계산
- ✅ 생두별 최적 로스팅 프로필 수립
- ✅ 월별 로스팅 계획 및 실적 비교 분석
- ✅ 원가 절감 목표 달성 (손실률 17%→14% 감축 목표)

---

## 2. Specify (명세)

### 2.1 현황 데이터

#### 로스팅 일지 분석 결과

```
분석 대상: 더문드립바 로스팅 일지 (Excel 파일)
분석 기간: 2025년 로스팅 기록 (현재 2개월분 보유)

파일 구조:
├── Sheet1: 월별 로스팅 기록 (영수증 형식)
│   └── 원두별 생두량, 볶은량 월별 기록
└── Sheet1(2): 블렌드 입력표
    ├── 풀문 블렌딩 (Full Moon)
    └── 뉴문 블렌딩 (New Moon)

현황:
- 담당자가 수동으로 영수증 형식으로 기록 중
- 월별 로스팅 데이터 누적 중
- 블렌드별 혼합 구성 명시 (Excel 입력표)
```

#### 풀문(Full Moon) 블렌딩

블렌드 구성: **마사이 40% + 안티구아 40% + 모모라 10% + g4 10%**

| # | 원두 | 생두량(kg) | 볶은량(kg) | 혼합률(%) |
|---|------|-----------|----------|-----------|
| 1 | 마사이 | 10,602.4 | 8,800 | 40% |
| 2 | 안티구아 | 10,602.4 | 8,800 | 40% |
| 3 | 모모라 | 2,650.6 | 2,200 | 10% |
| 4 | g4 | 2,650.6 | 2,200 | 10% |
| **소계** | | **26,505.9** | **22,000** | **100%** |

**혼합 후 손실률**: (26,505.9 - 22,000) / 26,505.9 = **17.0%**
**판매가**: ₩22,000 (풀문 블렌딩 제품)

#### 뉴문(New Moon) 블렌딩

블렌드 구성: **브라질 60% + 콜롬비아 30% + g4 10%**

| # | 원두 | 생두량(kg) | 볶은량(kg) | 혼합률(%) |
|---|------|-----------|----------|-----------|
| 1 | 브라질 | 2,891.6 | 2,400 | 60% |
| 2 | 콜롬비아 | 1,445.8 | 1,200 | 30% |
| 3 | g4 | 481.9 | 400 | 10% |
| **소계** | | **4,819.3** | **4,000** | **100%** |

**혼합 후 손실률**: (4,819.3 - 4,000) / 4,819.3 = **17.0%**
**판매가**: TBD (뉴문 블렌딩 제품)

#### 전체 통계

| 지표 | 값 |
|------|-----|
| 총 생두량 | 31,325.3 kg |
| 총 볶은량 | 26,000 kg |
| 총 손실량 | 5,325.3 kg |
| **평균 손실률** | **17.0%** |

### 2.2 데이터 구조

```
로스팅 데이터 구성:
├── 원두 정보
│   ├── 원두명
│   ├── 원산지 코드 (Eth, K, Co, Gu 등)
│   └── 로스팅 레벨 (W, N, Pb 등)
├── 로스팅 수량
│   ├── 생두량 (kg)
│   └── 볶은량 (kg)
├── 블렌딩 정보
│   ├── 블렌드명 (풀문/뉴문)
│   └── 혼합률 (%) [각 원두의 블렌드 내 비중]
└── 원가 정보
    ├── 판매가 (블렌드 제품 가격)
    └── 원가 계산값 (혼합 후 원가)
```

### 2.3 요구사항

#### 기능 요구사항 (FR)

| ID | 요구사항 | 설명 |
|----|---------|------|
| FR-1 | 로스팅 기록 관리 | 생두량, 볶은량, 손실률 자동 계산 |
| FR-2 | 원가 계산 | 블렌드별 원두 혼합률 × 생두 원가 → 블렌드 원가 자동 계산 |
| FR-3 | 블렌딩 레시피 | 풀문/뉴문별 혼합률(%) 저장 및 조회 |
| FR-4 | 손실률 분석 | 블렌드별/월별 혼합 후 손실률 추이 분석 |
| FR-5 | 원가 리포트 | 블렌드별 원가 및 판매가 기반 수익성 분석 |
| FR-6 | 로스팅 플랜 | 월별 블렌드별 로스팅 계획 수립 기능 |

#### 비기능 요구사항 (NFR)

| ID | 요구사항 | 기준 |
|----|---------|------|
| NFR-1 | 정확도 | 손실률 계산 오차 < 0.1% |
| NFR-2 | 응답시간 | 데이터 조회 < 2초 |
| NFR-3 | 가용성 | 99% 이상 |
| NFR-4 | 확장성 | 월 1,000건 이상 데이터 처리 |

---

## 3. Clarify (명확화)

### 3.1 현황 분석

#### 강점 (Strengths)
- ✅ **일관된 손실률**: 모든 원두에서 균일한 17% 손실률 → 안정적인 로스팅 프로세스
- ✅ **명확한 블렌딩**: 풀문/뉴문 두 가지 명확한 블렌드 라인
- ✅ **다양한 포트폴리오**: 7가지 원두로 다양한 맛 프로필 제공

#### 약점 (Weaknesses)
- ❌ **높은 손실률**: 17% 손실률은 업계 평균(12-15%)보다 높음
- ❌ **혼합률 관리**: 각 블렌드의 혼합률을 명확히 관리하지 않음 → 재현성 부족
- ❌ **가격 정보 부족**: 블렌드 제품의 판매가 미입력 (뉴문 블렌딩)
- ❌ **데이터 연계**: 로스팅 기록과 원가 계산이 분리됨

#### 기회 (Opportunities)
- 🎯 **손실률 개선**: 17% → 14%로 개선 시 약 1,000kg 절감 (원가 절감 효과)
- 🎯 **원가 최적화**: 포션 크기 및 로스팅 로드 조정으로 효율성 증대
- 🎯 **데이터 분석**: 월별/계절별 로스팅 패턴 분석 → 예측 가능한 계획
- 🎯 **품질 추적**: 로트별 로스팅 프로필 관리로 품질 일관성 향상

#### 위협 (Threats)
- ⚠️ **원재료 가격 변동**: 생두 원가 상승 시 마진율 감소
- ⚠️ **수요 변동**: 블렌드별 수요 편차 → 재고 관리 어려움
- ⚠️ **장비 손상**: 로스팅 머신 노후화 → 손실률 악화 가능성

### 3.2 문제점 정의

#### Problem 1: 높은 손실률 (17%)
**현재 상태**: 17%의 손실률
**목표 상태**: 14% 이하로 개선
**영향**: 연간 1,000kg 이상의 원두 낭비
**원인 분석**:
- 로스팅 온도/시간 편차
- 냉각 과정 중 손실
- 로스팅 로드 효율성 부족

#### Problem 2: 혼합률 관리 미흡
**현재 상태**: 블렌딩 혼합률이 명확하게 관리되지 않음
**목표 상태**: 각 블렌드의 혼합률을 명확히 정의하고 유지
**영향**: 제품 재현성 부족, 품질 편차, 원가 계산 오류
**원인 분석**:
- 블렌딩 레시피를 백분율(%)로 정의하지 않음
- 혼합 시 정량적 기준 부재

#### Problem 3: 원가 계산 자동화 부족
**현재 상태**: 수동으로 분산된 데이터
**목표 상태**: 통합된 원가 계산 시스템
**영향**: 오류 가능성, 분석 지연, 의사결정 지연
**원인 분석**:
- 로스팅 기록과 원가 계산 분리
- 수동 입력 및 검증 필요

### 3.3 시사점

| 항목 | 현황 | 개선 방향 |
|------|------|---------|
| 손실률 | 17.0% | 14.0% 이상 개선 |
| 혼합률 관리 | 미정의 | 블렌드별 혼합률(%) 명확히 정의 |
| 원가 추적 | 수동 | 혼합률 기반 자동 원가 계산 |
| 품질 관리 | 기본 수준 | 혼합률 표준화로 재현성 강화 |
| 데이터 분석 | 제한적 | 블렌드별 월별 분석 |

---

## 4. Plan (계획)

### 4.1 기술 스택

#### Backend

| 계층 | 기술 | 선택 이유 |
|------|------|---------|
| **Framework** | Streamlit | 데이터 앱 신속 개발 |
| **ORM** | SQLAlchemy | 데이터 무결성 관리 |
| **Database** | SQLite | 로컬 운영 환경에 최적 |
| **분석** | Pandas/NumPy | 데이터 분석 및 시각화 |
| **시각화** | Plotly | 인터랙티브 차트 |

#### Data Flow

```
Raw Data (로스팅 일지)
    ↓
[데이터 수집] → Excel/Manual Entry
    ↓
[데이터 변환] → SQLAlchemy ORM 저장
    ↓
[데이터 분석] → Pandas (손실률, 원가 계산)
    ↓
[시각화] → Plotly (대시보드, 리포트)
    ↓
[제출] → 의사결정 지원 (리포트, 계획안)
```

### 4.2 아키텍처

#### 논리 아키텍처

```
┌─────────────────────────────────────────────┐
│         Presentation Layer                   │
│    (Streamlit Dashboard & Reports)          │
├─────────────────────────────────────────────┤
│         Business Logic Layer                 │
│  - RoastingService (로스팅 데이터 관리)    │
│  - CostService (원가 계산)                  │
│  - AnalyticsService (분석 로직)             │
├─────────────────────────────────────────────┤
│         Data Access Layer                    │
│  - SQLAlchemy Models                        │
│  - Repository Pattern                       │
├─────────────────────────────────────────────┤
│         Data Layer                           │
│  - SQLite Database                          │
│  - Transaction Logs                         │
└─────────────────────────────────────────────┘
```

#### 데이터 모델

```
Bean (원두)
├── id (PK)
├── name (원두명)
├── country_code (원산지)
├── roast_level (로스팅 레벨)
├── price_per_kg (원가)
└── status (활성/비활성)

RoastingLog (로스팅 기록)
├── id (PK)
├── bean_id (FK → Bean)
├── raw_weight_kg (생두량)
├── roasted_weight_kg (볶은량)
├── loss_rate (손실률) = (raw - roasted) / raw
├── roasting_date (로스팅 날짜)
└── notes (메모)

BlendRecipe (블렌딩 레시피)
├── id (PK)
├── blend_id (FK → Blend)
├── bean_id (FK → Bean)
├── blending_ratio (혼합률 %) [0-100]
└── created_at (생성일시)

RoastingPlan (로스팅 계획)
├── id (PK)
├── bean_id (FK → Bean)
├── planned_raw_weight_kg (계획 생두량)
├── target_loss_rate (목표 손실률)
├── month (계획 월)
└── status (진행 상태)
```

### 4.3 기능 설계

#### Feature 1: 로스팅 기록 관리

```
입력:
  - 원두 선택
  - 생두량 (kg)
  - 볶은량 (kg)
  - 로스팅 날짜

자동 계산:
  - 손실률 = (생두량 - 볶은량) / 생두량
  - 손실 중량 = 생두량 - 볶은량

출력:
  - 로스팅 기록 저장
  - 실시간 손실률 표시
```

#### Feature 2: 원가 계산

```
입력:
  - 블렌드별 원두 혼합률 (%)
  - 원두별 생두 원가 (₩/kg)
  - 목표 판매가 (₩)

계산 로직:
  1. 혼합 비중별 원가 = 각 원두 생두 원가 × 혼합률(%)
  2. 블렌드 총 원가 = Σ(혼합 비중별 원가)
  3. 혼합 후 손실 반영 원가 = 블렌드 총 원가 / (1 - 손실률)
  4. 수익성 = 판매가 - 최종 원가

예시 (풀문 블렌딩):
  마사이 원가×40% + 안티구아 원가×40% + 모모라 원가×10% + g4 원가×10%
  = 혼합 후 손실 전 원가

  혼합 후 손실률 17%를 고려하면:
  최종 원가 = 혼합 원가 / 0.83 (83%가 실제 판매 가능량)

출력:
  - 블렌드별 원가
  - 손실률 반영 최종 원가
  - 판매가 대비 수익성
```

#### Feature 3: 손실률 분석

```
분석 항목:
  - 월별 블렌드별 혼합 후 손실률 추이
  - 각 블렌드의 일관성 모니터링
  - 손실률 목표 대비 실적
  - 로스팅 효율성 개선도 추적

시각화:
  - 라인 차트: 월별 손실률 추이
  - 바 차트: 블렌드별 손실률 비교
  - 게이지 차트: 목표 대비 달성도
  - 표: 월별 상세 데이터
```

#### Feature 4: 로스팅 계획

```
입력:
  - 월별 예상 블렌드별 판매량
  - 블렌드별 혼합률 (%)
  - 목표 손실률

생성:
  - 월별 블렌드별 로스팅 계획서
  - 필요 원두별 생두량 계산
  - 혼합 후 예상 생산량

계산 로직:
  필요 생두량 = (목표 판매량 / (1 - 손실률)) / 혼합률(%)

예시 (풀문 100kg 필요):
  마사이 필요량 = (100 / 0.83) × 40% = 48.2 kg
  안티구아 필요량 = (100 / 0.83) × 40% = 48.2 kg
  모모라 필요량 = (100 / 0.83) × 10% = 12.0 kg
  g4 필요량 = (100 / 0.83) × 10% = 12.0 kg

추적:
  - 실적 vs 계획 비교
  - 진행률 모니터링
  - 손실률 편차 분석
```

### 4.4 성공 메트릭

| 메트릭 | 현재 | 목표 | 기간 |
|--------|------|------|------|
| 손실률 | 17.0% | 14.0% | 3개월 |
| 원가 계산 오차 | 수동 입력 | 자동 계산 100% | 1개월 |
| 데이터 추적성 | 60% | 100% | 1개월 |
| 의사결정 속도 | 2-3일 | < 1시간 | 2개월 |

---

## 5. Tasks (작업 분해)

### 5.1 개발 작업 구분 (Work Breakdown Structure)

#### Phase 1: 기초 데이터 구축 (1.5주)

| Task | 설명 | 기간 | 담당 | 상태 |
|------|------|------|------|------|
| T1-1 | 기존 로스팅 기록 마이그레이션 (Sheet1 데이터) | 2일 | TBD | Pending |
| T1-2 | 원두 마스터 데이터 정리 (13종) | 1일 | TBD | Pending |
| T1-3 | 블렌드 혼합률 설정 (Sheet1(2) 데이터) | 1일 | TBD | Pending |
| T1-4 | 원가 정보 입력 (생두 원가/블렌드 판매가) | 2일 | TBD | Pending |
| T1-5 | 데이터 검증 및 정제 | 1일 | TBD | Pending |

#### Phase 2: 백엔드 서비스 개발 (2주)

| Task | 설명 | 기간 | 담당 | 상태 |
|------|------|------|------|------|
| T2-1 | RoastingLog 모델 & CRUD | 3일 | TBD | Pending |
| T2-2 | 손실률 자동 계산 로직 | 2일 | TBD | Pending |
| T2-3 | CostService 개발 | 3일 | TBD | Pending |
| T2-4 | 원가 계산 알고리즘 구현 | 2일 | TBD | Pending |
| T2-5 | AnalyticsService 개발 | 2일 | TBD | Pending |
| T2-6 | Unit Test 작성 | 3일 | TBD | Pending |

#### Phase 3: 프론트엔드 개발 (2.5주)

| Task | 설명 | 기간 | 담당 | 상태 |
|------|------|------|------|------|
| T3-1 | 로스팅 기록 입력 페이지 (단일 입력) | 2일 | TBD | Pending |
| T3-2 | 원가 계산 대시보드 | 2일 | TBD | Pending |
| T3-3 | 손실률 분석 페이지 | 2일 | TBD | Pending |
| T3-4 | 로스팅 계획 수립 페이지 | 2일 | TBD | Pending |
| T3-5 | 리포트 생성 기능 | 2일 | TBD | Pending |
| T3-6 | UI/UX 개선 | 2일 | TBD | Pending |
| T3-7 | 영수증 형식 월별 로스팅 기록 입력 페이지 | 2.5일 | TBD | Pending |

#### Phase 4: 통합 & 테스트 (1주)

| Task | 설명 | 기간 | 담당 | 상태 |
|------|------|------|------|------|
| T4-1 | 시스템 통합 테스트 | 2일 | TBD | Pending |
| T4-2 | 사용자 수용 테스트 (UAT) | 2일 | TBD | Pending |
| T4-3 | 성능 최적화 | 1일 | TBD | Pending |
| T4-4 | 버그 수정 및 배포 | 1일 | TBD | Pending |

#### Phase 5: 배포 & 운영 (1주)

| Task | 설명 | 기간 | 담당 | 상태 |
|------|------|------|------|------|
| T5-1 | 운영 매뉴얼 작성 | 1일 | TBD | Pending |
| T5-2 | 직원 교육 | 1일 | TBD | Pending |
| T5-3 | 시스템 배포 | 1일 | TBD | Pending |
| T5-4 | 모니터링 & 지원 | 지속 | TBD | Pending |

### 5.2 상세 작업 명세

#### T2-1: RoastingLog 모델 & CRUD

```python
# 구현 요구사항
- RoastingLog SQLAlchemy 모델 정의
  - bean_id (FK)
  - raw_weight_kg (float)
  - roasted_weight_kg (float)
  - loss_rate_percent (float, 계산)
  - roasting_date (datetime)
  - notes (string)

- CRUD 작업
  - Create: 로스팅 기록 추가
  - Read: 조회 (날짜 범위, 원두 필터)
  - Update: 기록 수정
  - Delete: 기록 삭제

- 유효성 검증
  - 생두량 > 0
  - 볶은량 > 0 and <= 생두량
  - 손실률 0-100% 범위
```

#### T2-2: 손실률 자동 계산 로직

```python
# 계산 공식
loss_rate = ((raw_weight - roasted_weight) / raw_weight) * 100

# 처리 범위
- 손실률 계산 시 자동 실행
- 월별/원두별 손실률 집계
- 목표 손실률과 실적 비교

# 성능 기준
- 계산 오차 < 0.01%
- 응답 시간 < 100ms
```

#### T2-3: CostService 개발

```python
# 주요 기능
1. 포션별 원가 계산
   formula: cost_per_portion = (bean_cost_per_kg * total_roasted_kg) / portions

2. 블렌드 원가 계산
   formula: blend_cost = sum(각 원두의 포션당 원가)

3. 권장 판매가 제시
   formula: recommended_price = blend_cost * margin_ratio (기본 2.5)

4. 수익성 분석
   formula: profit = selling_price - blend_cost
```

#### T3-1: 로스팅 기록 입력 페이지 (단일 입력)

```
UI 구성:
┌─────────────────────────────┐
│   로스팅 기록 입력          │
├─────────────────────────────┤
│ [원두 선택] ▼              │
│ [생두량 입력] _____ kg      │
│ [볶은량 입력] _____ kg      │
│ [로스팅 날짜] __/__/__      │
│ [메모] ________________   │
├─────────────────────────────┤
│  손실률: 17.0% (자동계산)  │
│  손실량: 1,000 kg (자동계산)|
├─────────────────────────────┤
│ [저장] [취소] [목록]       │
└─────────────────────────────┘

기능:
- 드롭다운에서 원두 선택
- 자동으로 손실률/손실량 계산
- 저장 시 데이터 검증
- 저장 후 목록 갱신
```

#### T3-7: 영수증 형식 월별 로스팅 기록 입력 페이지

```
페이지명: RoastingReceipt.py

UI 구성 (월별 그리드 형식):
┌──────────────────────────────────────────────────────┐
│   영수증 형식 로스팅 기록 (월별 입력)                 │
├──────────────────────────────────────────────────────┤
│ [월 선택] ▼ 2025년 10월                              │
├──────────────────────────────────────────────────────┤
│                                                       │
│  원두명    │  생두량(kg) │  볶은량(kg) │  손실률(%)  │
├───────────┼────────────┼────────────┼────────────┤
│  마사이    │  __________│  __________│  17.0%     │
│  안티구아  │  __________│  __________│  17.0%     │
│  브라질    │  __________│  __________│  17.0%     │
│  콜롬비아  │  __________│  __________│  17.0%     │
│  모모라    │  __________│  __________│  17.0%     │
│  g4        │  __________│  __________│  17.0%     │
│  기타...   │  __________│  __________│  17.0%     │
├───────────┼────────────┼────────────┼────────────┤
│  합계      │  __________│  __________│  17.0%     │
└───────────┴────────────┴────────────┴────────────┘

블렌드 혼합 비율 설정:
┌──────────────────────────────────────────────────────┐
│   블렌드별 혼합 구성                                  │
├──────────────────────────────────────────────────────┤
│ [블렌드 선택] ▼ (풀문, 뉴문)                         │
│                                                       │
│  원두명    │  혼합률(%) │                            │
├───────────┼───────────┤                            │
│  마사이    │  40%      │                            │
│  안티구아  │  40%      │                            │
│  모모라    │  10%      │                            │
│  g4        │  10%      │                            │
├───────────┼───────────┤                            │
│  합계      │  100%     │                            │
└───────────┴───────────┘

│ [저장] [목록] [다운로드 Excel]                        │
└──────────────────────────────────────────────────────┘

주요 기능:
1. 월별 그리드 입력
   - 원두별 행, 월별 열로 구성
   - 생두량과 볶은량 입력
   - 손실률 자동 계산 (손실률 = (생두량 - 볶은량) / 생두량)

2. 블렌드 혼합 비율 설정
   - 블렌드별로 원두의 혼합 비율(%) 설정
   - 합계가 100%인지 자동 검증

3. 데이터 검증
   - 생두량 > 0 검증
   - 볶은량 > 0 and <= 생두량 검증
   - 혼합 비율 합계 = 100% 검증

4. 데이터 영속성
   - 월별 기록 저장
   - 기존 데이터 수정/삭제 가능
   - Excel로 다운로드 가능

5. 통계 계산
   - 월별 원두별 손실률
   - 월별 총 생두량/볶은량
   - 블렌드별 월간 혼합 원가 (CostService와 연동)

구현 세부사항:
- Streamlit st.data_editor 사용하여 그리드 편집 구현
- 원두 마스터데이터(13종) 드롭다운으로 제공
- 백엔드: RoastingService.get_monthly_records()로 데이터 조회
- 저장: RoastingService.save_monthly_batch()로 일괄 저장
- 에러 처리: 데이터 검증 실패시 명확한 에러 메시지
```

### 5.3 일정 관리

```
일정표 (Gantt Chart):

Phase 1: 데이터 구축        [====]         1.5주
Phase 2: 백엔드 개발           [========]   2주
Phase 3: 프론트엔드 개발       [=========]   2.5주
Phase 4: 통합 & 테스트                [===] 1주
Phase 5: 배포 & 운영                    [=] 1주

총 예상 기간: 6.5주 (약 7주)
```

---

## 6. Implement (구현)

> **Note**: 이 섹션은 Tasks 검토 후 진행하겠습니다.
> 이 계획안을 검토하신 후 "구현 진행 승인"을 해주시면 다음과 같이 진행합니다:

### 6.1 구현 순서

1. **Step 1**: Phase 1 작업 완료 (데이터 마이그레이션)
2. **Step 2**: Phase 2 작업 완료 (서비스 로직 개발)
3. **Step 3**: Phase 3 작업 완료 (UI 개발)
4. **Step 4**: Phase 4 작업 완료 (통합 테스트)
5. **Step 5**: Phase 5 작업 완료 (배포)

### 6.2 구현 산출물

- ✓ RoastingLog 모델 및 CRUD 서비스
- ✓ CostService (원가 계산 로직)
- ✓ AnalyticsService (분석 로직)
- ✓ RoastingPlan 관리 기능
- ✓ Streamlit 대시보드 페이지들
- ✓ 자동 리포트 생성 기능
- ✓ Unit & Integration 테스트

### 6.3 코드 구조

```
app/
├── models/
│   ├── RoastingLog (로스팅 기록)
│   ├── RoastingPlan (계획)
│   └── CostData (원가 데이터)
├── services/
│   ├── roasting_service.py
│   ├── cost_service.py
│   └── analytics_service.py
├── pages/
│   ├── RoastingManagement.py
│   ├── CostAnalysis.py
│   ├── RoastingPlan.py
│   └── RoastingReport.py
└── components/
    ├── roasting_input_form.py
    └── charts.py
```

---

## 7. Analyze (검증)

### 7.1 검증 계획

#### Unit Test

```
대상:
- 손실률 계산 함수 (오차 범위 < 0.01%)
- 원가 계산 함수 (각 포뮬라별)
- 데이터 유효성 검증 함수

기준:
- 100% 코드 커버리지 (핵심 로직)
- 모든 테스트 케이스 통과
```

#### Integration Test

```
테스트 시나리오:
1. 로스팅 기록 입력 → 원가 계산 → 리포트 생성
2. 월별 데이터 조회 → 손실률 분석 → 차트 표시
3. 계획 수립 → 실적 입력 → 비교 분석

기준:
- 모든 데이터 흐름 정상 작동
- 계산 결과 정확도 검증
- 성능 기준 충족
```

#### UAT (User Acceptance Test)

```
참여자:
- 로스팅 담당자
- 운영 관리자
- 재무 담당자

검증 항목:
- 사용 편의성
- 기능 정확성
- 보고 기능 완성도
- 성능 만족도
```

### 7.2 품질 기준

| 항목 | 기준 | 목표 |
|------|------|------|
| 기능 완성도 | 필수 기능 100% 구현 | 100% |
| 정확도 | 손실률 계산 오차 < 0.01% | 99.9% |
| 성능 | 응답 시간 < 2초 | < 1초 |
| 안정성 | 에러 발생 < 0.1% | 0% |
| 사용자 만족도 | 설문 점수 > 4/5 | > 4.5/5 |

### 7.3 배포 전 체크리스트

- [ ] 모든 Unit Test 통과
- [ ] 모든 Integration Test 통과
- [ ] UAT 완료 및 승인
- [ ] 성능 최적화 완료
- [ ] 보안 검토 완료
- [ ] 운영 매뉴얼 작성 완료
- [ ] 직원 교육 완료
- [ ] 데이터 백업 완료

### 7.4 성공 판정

**로스팅 플랜은 다음 조건을 만족할 때 성공으로 판정됩니다:**

1. ✅ 모든 필수 기능 구현 완료
2. ✅ 손실률 모니터링 시스템 정상 작동
3. ✅ 원가 계산 자동화 99% 이상 정확도
4. ✅ 월별 로스팅 계획서 자동 생성
5. ✅ 사용자 만족도 4.5점 이상 (5점 만점)
6. ✅ 손실률 개선 목표 달성 (17% → 14% 이하)

### 7.5 지속적 개선

#### 1개월 후 검증

- 실제 로스팅 데이터 수집 및 분석
- 손실률 개선 추이 확인
- 사용자 피드백 수집
- 추가 개선 사항 도출

#### 3개월 후 평가

- 손실률 개선 목표 달성도 (목표: 14% 이하)
- 원가 절감 효과 측정
- 의사결정 속도 개선도 측정
- 차기 개선 계획 수립

---

## 요약 및 다음 단계

### 현황
- 로스팅 일지 데이터 분석 완료
- 17% 손실률 및 원가 구조 파악
- 7가지 원두, 2가지 블렌드 운영 중

### 목표
- 손실률 17% → 14% 이상 개선
- 원가 계산 자동화
- 월별 로스팅 계획 수립 시스템 구축
- 의사결정 속도 향상

### 다음 단계
1. **계획안 검토**: 이 문서에 대한 검토 및 피드백
2. **검토 결과 반영**: 필요 시 수정 및 보완
3. **승인**: "구현 진행 승인" 시 Phase 1 작업 시작
4. **구현**: 6주 일정으로 단계별 개발 진행
5. **배포**: 완료 후 운영 환경에 배포

---

**작성자**: Claude Code
**작성일**: 2025-10-29
**버전**: 1.0 (초안)
**상태**: 검토 대기 중
